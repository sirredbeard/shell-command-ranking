#!/bin/bash

# Define the file_extensions array
file_extensions=(
    "JPG"
    "JPEG"
    "PDF"
    "PNG"
    "GIF"
    "ai"
    "bat"
    "bmp"
    "c"
    "cc"
    "cmd"
    "conf"
    "cpp"
    "cs"
    "css"
    "db"
    "doc"
    "docx"
    "gif"
    "gz"
    "h"
    "htm"
    "html"
    "htmx"
    "ico"
    "icns"
    "jar"
    "jpeg"
    "jpg"
    "js"
    "jsx"
    "json"
    "log"
    "md"
    "mp4"
    "MP4"
    "npmrc"
    "otf"
    "pack"
    "pdf"
    "php"
    "pl"
    "png"
    "ppt"
    "pptx"
    "proj"
    "ps1"
    "psd"
    "py"
    "qcow"
    "qcow2"
    "rb"
    "tar"
    "tgz"
    "ts"
    "ttf"
    "txt"
    "vue"
    "webm"
    "webp"
    "xmp"
    "xpm"
    "yaml"
    "yml"
    "zst"
    "DS_Store"
    "DS_store"
    "xpm"
    "glif"
    "fd"
    "zip"
    "woff"
    "woff2"
    "dox"
    "plist"
    "bats"
    "go"
    "svg"
    "cu"
    "segment"
    "asc"
    "tab"
    "patch"
    "zsh-theme"
    "glm"
    "sum"
    "j2"
    "lock"
    "dir"
    "scale"
    "tex"
    "sty"
    "rst"
    "eps"
    "bdf"
    "list"
    "vim"
    "wav"
    "csv"
    "macos"
    "toml"
    "gitignore"
    "mod"
    "java"
    "xml"
    "cmake"
    "cfg"
    "wxl"
    "exe"
    "ini"
    "service"
    "vimrc"
    "dev"
    "txt"
    "scala"
    "cron"
    "debian"
    "fedora"
    "nix"
    "xcf"
    "1"
    "wxs"
    "ascii"
    "bst"
    "cls"
    "spec"
    "xz"
    "mk"
    "edn"
    "ebuild"
    "glyph"
    "pnach"
    "bin"
    "dll"
    "netset"
    "deb"
    "install"
    "gitkeep"
    "var"
    "diff"
    "tpl"
    "config"
    "rasi"
    "el"
    "dts"
    "initd"
    "sample"
    "sql"
    "confd"
    "desktop"
    "template"
    "properties"
    "dockerignore"
    "org"
    "desc"
    "profile"
    "mask"
    "npmignore"
    "in"
    "fw"
    "ipset"
    "0"
    "defaults"
    "adoc"
    "eclass"
    "bsp"
    "tf"
    "lua"
    "jinja"
    "jinja2"
    "po"
    "xmind"
    "pcf"
    "applescript"
    "rules"
    "env"
    "dds"
    "keep"
    "debab"
    "debaa"
    "z01"
    "z02"
    "z03"
    "partaa"
    "partab"
    "iso"
    "apk"
    "debac"
    "dylib"
    "mmdb"
    "ttc"
    "001"
    "002"
    "003"
    "004"
    "005"
    "006"
    "007"
    "008"
    "009"
    "010"
    "TC"
    "SC"
    "K"
    "KR"
    "J"
    "HC"
    "1"
    "2"
    "3"
    "4"
    "5"
    "6"
    "7"
    "8"
    "9"
    "10"
    "01"
    "02"
    "03"
    "04"
    "05"
    "06"
    "07"
    "08"
    "09"
    "10"
    "t"
    "voidlinux"
    "so"
    "pyc"
    "hql"
    "gitattributes"
    "gitmodules"
    "example"
    "csc"
    "xslt"
    "editorconfig"
    "def"
    "by"
    "sls"
    "partac"
    "dump"
    "unhinted"
    "rar"
    "dmg"
    "force"
    "stpl"
    "key"
    "init"
    "nanorc"
    "cf"
    "disabled"
    "d"
    "proto"
    "markdown"
    "plymouth"
    "gradle"
    "rsp"
    "Bin"
    "CN"
    "ioreg"
    "expected"
    "swift"
    "mo"
    "download"
    "pem"
    "whl"
    "efi"
    "hook"
    "tmpl"
    "gentoo"
    "ksql"
    "options"
    "script"
    "rc"
    "lst"
    "eot"
    "dat"
    "m4"
    "logrotate"
    "sig"
    "bashrc"
    "opk"
    "tw"
    "TW"
    "hk"
    "HK"
    "jp"
    "JP"
    "cn"
    "CN"
    "kicad_pcb"
    "war"
    "odt"
    "lzma"
    "bz2"
    "img"
    "pdb"
    "msstyles"
    "b04"
    "spk"
    "map"
    "dex"
    "windows"
    "deny"
    "djvu"
    "TXT"
    "phar"
    "crt"
    "nls"
    "s"
    "avsc"
    "default"
    "dtbo"
    "dict"
    "pot"
    "types"
    "groovy"
    "fon"
    "prompt"
    "pc"
    "initd-r1"
    "minttyrc"
    "less"
    "ddlog"
    "tmpfiles"
    "rs"
    "beforehostbuild"
    "gpg"
    "csr"
    "repo"
    "acf"
    "acl"
    "ipk"
    "pth"
    "x86_64"
    "amd64"
    "i686"
    "mgc"
    "msi"
    "tmp"
    "mbn"
    "ndjson"
    "krb"
    "0-dev"
    "0-rc95"
    "so-20170419"
    "34-jessie"
    "kt"
    "mjs"
    "mustache"
    "qpkg"
    "md5"
    "out"
    "pacscript"
    "ipynb"
    "rds"
    "hpp"
    "clj"
    "tsv"
    "snap"
    "inc"
    "msg"
    "bed"
    "mov"
    "mp3"
    "scss"
    "cljc"
    "rnc"
    "am"
    "mdx"
    "specs"
    "cast"
    "theme"
    "m"
    "ck"
    "blink"
    "rkt"
    "mal"
    "directory"
    "tcl"
    "tsx"
    "cnf"
    "rtf"
    "url"
    "apng"
    "nc"
    "grad"
    "pcap"
    "delta"
    "grd"
    "npy"
    "hosts"
    "flv"
    "ilk"
    "21"
    "wasm"
    "rda"
    "tif"
    "pt"
    "mov"
    "MOV"
    "pb"
    "meta"
    "tdf"
    "R"
    "Rd"
    "xbm"
    "prefab"
    "scm"
    "rdata"
    "mat"
    "hs"
    "ghoti"
    "zshrc"
    "ztst"
    "shader"
    "res"
    "asset"
    "rda"
    "data-00000-of-00001"
    "onnx"
    "TTF"
    "sublime-package"
    "FBX"
    "60"
    "57"
    "index"
    "b21"
    "alfredworkflow"
    "dng"
    "DNG"
    "360"
    "TGA"
    "engine"
    "FBX"
    "igs"
)

# Get the directory to search from the command-line argument, or default to "repos"
dir_to_search=${1:-repos}

# Build the find command
find_command="find $dir_to_search -type f \\("
first=true
for ext in "${file_extensions[@]}"; do
    if [ "$first" = true ] ; then
        find_command+=" -name \"*.$ext\""
        first=false
    else
        find_command+=" -o -name \"*.$ext\""
    fi
done
find_command+=" \\) -exec rm -f {} +"

# Execute the find command
echo "Deleting files with unwanted extensions"
eval $find_command

# Delete files with no extensions
echo "Deleting files with no extension"
find $dir_to_search -type f -not -name "*.*" -exec rm -rf {} +

# Delete .git folders
echo "Deleting .git folders"
find $dir_to_search -type d -name ".git" ! -path "*shell-command-ranking/.git*" -exec rm -rf {} +