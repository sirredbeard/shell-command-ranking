#!/bin/bash

# Define the file_extensions array
file_extensions=(
    "JPG"
    "JPEG"
    "PDF"
    "PNG"
    "GIF"
    "ai"
    "bat"
    "bmp"
    "c"
    "cc"
    "cmd"
    "conf"
    "cpp"
    "cs"
    "css"
    "db"
    "doc"
    "docx"
    "gif"
    "gz"
    "h"
    "htm"
    "html"
    "htmx"
    "ico"
    "icns"
    "jar"
    "jpeg"
    "jpg"
    "js"
    "jsx"
    "json"
    "log"
    "md"
    "mp4"
    "MP4"
    "npmrc"
    "otf"
    "pack"
    "pdf"
    "php"
    "pl"
    "png"
    "ppt"
    "pptx"
    "proj"
    "ps1"
    "psd"
    "py"
    "qcow"
    "qcow2"
    "rb"
    "tar"
    "tgz"
    "ts"
    "ttf"
    "txt"
    "vue"
    "webm"
    "webp"
    "xmp"
    "xpm"
    "yaml"
    "yml"
    "zst"
    "DS_Store"
    "DS_store"
    "xpm"
    "glif"
    "fd"
    "zip"
    "woff"
    "woff2"
    "dox"
    "plist"
    "bats"
    "go"
    "svg"
    "cu"
    "segment"
    "asc"
    "tab"
    "patch"
    "zsh-theme"
    "glm"
    "sum"
    "j2"
    "lock"
    "dir"
    "scale"
    "tex"
    "sty"
    "rst"
    "eps"
    "bdf"
    "list"
    "filelist"
    "tid"
    "S"
    "resw"
    "qml"
    "sln"
    "pie"
    "vim"
    "wav"
    "csv"
    "macos"
    "toml"
    "gitignore"
    "mod"
    "java"
    "xml"
    "cmake"
    "cfg"
    "wxl"
    "exe"
    "ini"
    "service"
    "vimrc"
    "dev"
    "txt"
    "scala"
    "cron"
    "debian"
    "fedora"
    "nix"
    "xcf"
    "1"
    "wxs"
    "ascii"
    "bst"
    "cls"
    "spec"
    "xz"
    "mk"
    "edn"
    "ebuild"
    "glyph"
    "pnach"
    "bin"
    "dll"
    "netset"
    "deb"
    "install"
    "gitkeep"
    "var"
    "diff"
    "tpl"
    "config"
    "rasi"
    "el"
    "dts"
    "initd"
    "sample"
    "sql"
    "confd"
    "desktop"
    "template"
    "properties"
    "dockerignore"
    "org"
    "desc"
    "profile"
    "mask"
    "npmignore"
    "in"
    "fw"
    "ipset"
    "0"
    "defaults"
    "adoc"
    "eclass"
    "bsp"
    "tf"
    "lua"
    "jinja"
    "jinja2"
    "po"
    "xmind"
    "pcf"
    "applescript"
    "rules"
    "env"
    "dds"
    "keep"
    "debab"
    "debaa"
    "z01"
    "z02"
    "z03"
    "partaa"
    "partab"
    "park"
    "iso"
    "apk"
    "debac"
    "dylib"
    "mmdb"
    "ttc"
    "001"
    "002"
    "003"
    "004"
    "005"
    "006"
    "007"
    "008"
    "009"
    "010"
    "TC"
    "SC"
    "K"
    "KR"
    "J"
    "HC"
    "1"
    "2"
    "3"
    "4"
    "5"
    "6"
    "7"
    "8"
    "9"
    "10"
    "01"
    "02"
    "03"
    "04"
    "05"
    "06"
    "07"
    "08"
    "09"
    "10"
    "t"
    "voidlinux"
    "so"
    "pyc"
    "hql"
    "gitattributes"
    "gitmodules"
    "example"
    "csc"
    "xslt"
    "editorconfig"
    "def"
    "by"
    "sls"
    "partac"
    "dump"
    "unhinted"
    "rar"
    "dmg"
    "force"
    "stpl"
    "key"
    "init"
    "nanorc"
    "cf"
    "disabled"
    "d"
    "proto"
    "markdown"
    "plymouth"
    "gradle"
    "rsp"
    "Bin"
    "CN"
    "ioreg"
    "expected"
    "swift"
    "mo"
    "download"
    "pem"
    "whl"
    "efi"
    "hook"
    "tmpl"
    "gentoo"
    "ksql"
    "options"
    "script"
    "rc"
    "lst"
    "eot"
    "dat"
    "m4"
    "logrotate"
    "sig"
    "bashrc"
    "opk"
    "tw"
    "TW"
    "hk"
    "HK"
    "jp"
    "JP"
    "cn"
    "CN"
    "kicad_pcb"
    "war"
    "odt"
    "lzma"
    "bz2"
    "img"
    "pdb"
    "msstyles"
    "b04"
    "spk"
    "map"
    "dex"
    "windows"
    "deny"
    "djvu"
    "TXT"
    "phar"
    "crt"
    "nls"
    "s"
    "avsc"
    "default"
    "dtbo"
    "dict"
    "pot"
    "types"
    "groovy"
    "fon"
    "prompt"
    "pc"
    "initd-r1"
    "minttyrc"
    "less"
    "ddlog"
    "tmpfiles"
    "rs"
    "beforehostbuild"
    "gpg"
    "csr"
    "repo"
    "acf"
    "acl"
    "ipk"
    "pth"
    "x86_64"
    "amd64"
    "i686"
    "mgc"
    "msi"
    "tmp"
    "mbn"
    "ndjson"
    "krb"
    "0-dev"
    "0-rc95"
    "so-20170419"
    "34-jessie"
    "kt"
    "mjs"
    "mustache"
    "qpkg"
    "md5"
    "out"
    "pacscript"
    "ipynb"
    "rds"
    "hpp"
    "clj"
    "tsv"
    "snap"
    "inc"
    "msg"
    "bed"
    "mov"
    "mp3"
    "scss"
    "cljc"
    "rnc"
    "am"
    "mdx"
    "specs"
    "cast"
    "theme"
    "m"
    "ck"
    "blink"
    "rkt"
    "mal"
    "directory"
    "tcl"
    "tsx"
    "cnf"
    "rtf"
    "url"
    "apng"
    "nc"
    "grad"
    "pcap"
    "delta"
    "grd"
    "npy"
    "hosts"
    "flv"
    "ilk"
    "21"
    "wasm"
    "rda"
    "tif"
    "pt"
    "mov"
    "MOV"
    "pb"
    "meta"
    "tdf"
    "R"
    "Rd"
    "xbm"
    "prefab"
    "scm"
    "rdata"
    "mat"
    "hs"
    "ghoti"
    "zshrc"
    "ztst"
    "shader"
    "res"
    "asset"
    "rda"
    "data-00000-of-00001"
    "onnx"
    "TTF"
    "sublime-package"
    "sublime-settings"
    "FBX"
    "60"
    "57"
    "index"
    "b21"
    "alfredworkflow"
    "dng"
    "DNG"
    "360"
    "TGA"
    "engine"
    "FBX"
    "igs"
    "tga"
    "gresource"
    "insv"
    "STEP"
    "b16"
    "b09"
    "hdr"
    "data"
    "old"
    "ko"
    "10-tk3+"
    "xls"
    "logs"
    "linux2628_x86_64"
    "dic"
    "final"
    "SLDASM"
    "exr"
    "pcapng"
    "ovpn"
    "class"
    "prefs"
    "fxml"
    "project"
    "layout"
    "zunit"
    "Rmd"
    "ch"
    "classpath"
    "ls"
    "dart"
    "colors"
    "mx"
    "awk"
    "enc"
    "test"
    "source"
    "jst"
    "fbx"
    "timer"
    "sources"
    "tmTheme"
    "snippets"
    "php~"
    "mm"
    "Xresources"
    "tiff"
    "spa"
    "b3d"
    "asar"
    "51-buster"
    "SLDPRT"
    "63-bullseye"
    "bt2"
    "ogg"
    "mhtml"
    "p2p"
    "fasta"
    "geojson"
    "ucode"
    "xlsx"
    "cool"
    "asar"
    "bt2"
    "cache"
    "crt"
    "m4a"
    "b03"
    "insp"
    "unity"
    "unitypackage"
    "pyd"
    "b02"
    "aarch64"
    "nix"
    "ui"
    "xaml"
    "coffee"
    "hxx"
    "vcxproj"
    "resx"
    "resw"
    "ktx"
    "wxvpkg"
    "chm"
    "avi"
    "wasmu"
    "obj"
    "wxvpkg"
    "webc"
    "rt"
    "epub"
    "zig"
    "lib"
    "a"
    "ssf"
    "56"
    "dwarfs"
    "dck"
    "v"
    "build"
    "pro"
    "pie"
    "pod"
    "pas"
    "strings"
    "csproj"
    "resx"
    "milk"
    "dtsi"
    "es6"
    "filters"
    "baseline"
    "srcml"
    "typescript"
    "pyxl"
    "frag"
    "network"
    "run"
    "info"
    "pm"
    "scad"
    "cxx"
    "ptt"
    "hxx"
    "MID"
    "tq"
    "dialog"
    "0_linux"
    "1_linux"
    "sml"
    "scap"
    "bmu"
    "WRL"
    "kicad_sym"
    "99"
    "98"
    "97"
    "96"
    "95"
    "94"
    "93"
    "92"
    "91"
    "90"
    "xbps"
    "9_linux"
    "8_linux"
    "7_linux"
    "6_linux"
    "5_linux"
    "4_linux"
    "3_linux"
    "2_linux"
    "1_linux"
    "hprof"
    "pch"
    "wasmer"
    "tcx"
    "inl"
    "AppImage"
    "999"
    "spi3d"
    "sv6"
    "parquet"
    "elf"
    "mem"
    "ring"
    "ringo"
    "mpg"
    "ppm"
    "p"
    "wrl"
    "10-x86_64-lz4"
    "js_c"
    "mkv"
    "10-x86_64-lzo"
    "22"
    "expect"
    "ankitex"
    "tflite"
    "gcode"
    "X"
    "traineddata"
    "10-x86_64-zstd"
    "hex"
    "step"
    "trace"
    "aiff"
    "sketch"
    "gfxtrace"
    "ring"
    "code"
    "asm"
    "qm"
    "dxf"
    "libsonnet"
    "orig"
    "pony"
    "multids"
    "dot"
    "vala"
    "txtar"
    "expectrc"
    "jsp"
    "mu"
    "fs"
    "xcscheme"
    "o"
    "hrc"
    "nas"
    "props"
    "vert"
    "clang-format"
    "rei"
    "pub"
    "flow"
    "xsl"
    "FCMat"
    "license"
    "decTest"
    "storyboard"
    "make"
    "target"
    "lisp"
    "gn"
    "erb"
    "ejs"
    "i"
    "wxcp"
    "progen"
    "browserslistrc"
    "cgi"
    "xcsettings"
    "vc"
    "eslintignore"
    "entitlements"
    "ml"
    "templatex"
    "reg"
    "Plo"
    "mailmap"
    "ttl"
    "bjo"
    "blp"
    "unx"
    "function"
    "word"
    "folded"
    "JSON"
    "debug"
    "quirk"
    "itermcolors"
    "3pcap"
    "htaccess"
    "bak"
    "arc"
    "qss"
    "3tiff"
    "pyi"
    "age"
    "container"
    "vs"
    "cpm"
    "svg+xml"
    "vscodeignore"
    "adb"
    "socket"
    "prettierignore"
    "cson"
    "ankiprog"
    "ankitex"
    "linux"
    "m3u"
)

# Get the directory to search from the command-line argument, or default to "repos"
dir_to_search=${1:-repos}

# Build the find command
find_command="find $dir_to_search -type f \\("
first=true
for ext in "${file_extensions[@]}"; do
    if [ "$first" = true ] ; then
        find_command+=" -name \"*.$ext\""
        first=false
    else
        find_command+=" -o -name \"*.$ext\""
    fi
done
find_command+=" \\) -exec rm -f {} +"

# Execute the find command
echo "Deleting files with unwanted extensions"
eval $find_command

# Delete files with no extensions
echo "Deleting files with no extension"
find $dir_to_search -type f -not -name "*.*" -exec rm -rf {} +

# Delete .git folders
echo "Deleting .git folders"
find $dir_to_search -type d -name ".git" ! -path "*shell-command-ranking/.git*" -exec rm -rf {} +